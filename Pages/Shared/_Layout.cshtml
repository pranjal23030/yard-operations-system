<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - YardOps</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    @await RenderSectionAsync("Styles", required: false)
</head>
<body>

    <aside id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">
                <div class="sidebar-logo-box">
                    <img src="~/images/yardops-logo.png" alt="YardOps" class="sidebar-logo-img" />
                </div>
                <div class="sidebar-brand-text">
                    <span class="sidebar-brand-title">YardOps</span>
                    <span class="sidebar-brand-subtitle">Administrator</span>
                </div>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a asp-page="/Index" class="nav-item-link">
                <i class="fa-solid fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-table-cells-large"></i>
                <span>Slot Allocation</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-wave-square"></i>
                <span>Operations</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-truck"></i>
                <span>Trailers</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-location-dot"></i>
                <span>Locations</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-building"></i>
                <span>Carriers</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-eye"></i>
                <span>Monitoring</span>
            </a>
            <a asp-page="/Admin/Users/Index" class="nav-item-link">
                <i class="fa-solid fa-users"></i>
                <span>Users</span>
            </a>
            <a asp-page="/Admin/Roles/Index" class="nav-item-link">
                <i class="fa-solid fa-shield-halved"></i>
                <span>Roles</span>
            </a>
            <a href="#" class="nav-item-link">
                <i class="fa-solid fa-gear"></i>
                <span>Configuration</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="collapse-btn" id="sidebarToggle">
                <i class="fa-solid fa-angles-left" id="toggleIcon"></i>
                <span>Collapse Sidebar</span>
            </button>
        </div>
    </aside>

    <div id="main-wrapper">
        <header>
            <nav class="navbar navbar-expand-sm admin-header">
                <div class="container-fluid">
                    <span class="admin-dash-text">@ViewData["PageHeader"]</span>
                    <div class="ms-auto d-flex align-items: gap-2">
                        <partial name="_LoginPartial" />
                    </div>
                </div>
            </nav>
        </header>

        <main role="main">
            @RenderBody()
        </main>

        <footer class="footer admin-footer">
            <div class="container-fluid">
                <div class="admin-footer-inner">
                    <div class="admin-footer-left">
                        <i class="fa-solid fa-wave-square footer-icon" aria-hidden="true"></i>
                        <span class="footer-brand">YardOps</span>
                        <span class="footer-sep">|</span>
                        <span class="footer-sub">Yard Operations System</span>
                    </div>
                    <div class="admin-footer-right">
                        <span>© @DateTime.Now.Year All rights reserved</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <script>
        const sidebar = document.getElementById('sidebar');
        const toggleBtn = document.getElementById('sidebarToggle');
        const toggleIcon = document.getElementById('toggleIcon');

        if (toggleBtn && sidebar) {
            toggleBtn.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');

                if (toggleIcon) {
                    if (sidebar.classList.contains('collapsed')) {
                        toggleIcon.classList.remove('fa-angles-left');
                        toggleIcon.classList.add('fa-bars');
                    } else {
                        toggleIcon.classList.remove('fa-bars');
                        toggleIcon.classList.add('fa-angles-left');
                    }
                }
            });
        }

        // Highlight active nav link based on current page
        const currentPath = window.location.pathname;
        $('.nav-item-link').each(function() {
            const href = $(this).attr('href') || $(this).attr('asp-page');
            if (currentPath.includes(href) || (href === '/Index' && currentPath === '/')) {
                $('.nav-item-link').removeClass('active');
                $(this).addClass('active');
            }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>